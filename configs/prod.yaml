# Production Configuration for Mouna Sign Language Recognition

data:
  azure_container_bronze: "sign-videos-bronze-prod"
  azure_container_silver: "sign-videos-silver-prod"
  azure_container_gold: "sign-videos-gold-prod"
  num_classes: 2000
  train_split: 0.7
  val_split: 0.15
  test_split: 0.15
  max_sequence_length: 150
  video_fps: 30
  frame_size: [224, 224]

baseline:
  input_dim: 1629
  hidden_dim: 512
  num_layers: 2
  dropout: 0.3
  bidirectional: true
  model_type: "bilstm"
  use_attention: true

multimodal:
  vision_backbone: "timesformer"
  temporal_model: "transformer"
  fusion_strategy: "cross_attention"
  hidden_dim: 768
  num_heads: 8
  num_layers: 6
  dropout: 0.1
  pretrained: true

training:
  batch_size: 32  # Larger batch for production
  learning_rate: 0.001
  num_epochs: 200  # More epochs for production
  early_stopping_patience: 15
  weight_decay: 0.00001
  gradient_clip: 1.0
  num_workers: 8  # More workers for faster data loading
  device: "cuda"

  optimizer: "adamw"
  scheduler: "cosine"
  warmup_epochs: 10

  augmentation:
    spatial_flip: true
    temporal_speed: [0.8, 1.2]
    keypoint_noise: 0.01

  use_class_weights: true
  focal_loss: true
  focal_loss_gamma: 2.0

gemini:
  model: "gemini-1.5-pro"
  confidence_threshold: 0.7
  max_retries: 3
  rate_limit_delay: 1.0
  enabled: true

mlflow:
  tracking_uri: "databricks"  # Use Databricks MLflow in production
  experiment_name: "sign-recognition-prod"
  run_name: null
  log_models: true
  log_artifacts: true

evaluation:
  metrics:
    - "top1"
    - "top5"
    - "per_signer"
    - "latency"
    - "confusion_matrix"
    - "per_class"

  top_k: 5
  save_predictions: true
  save_confusion_matrix: true
  confusion_matrix_top_classes: 100

preprocessing:
  mediapipe:
    static_image_mode: false
    model_complexity: 2  # Use heavy model for production
    min_detection_confidence: 0.6
    min_tracking_confidence: 0.6

  normalize_pixels: true
  normalize_keypoints: true
  temporal_padding: "zeros"

  use_pose: true
  use_hands: true
  use_face: true

debug:
  verbose_logging: false
  save_intermediate_outputs: false
  limit_train_samples: null
  limit_val_samples: null
  visualize_augmentations: false
